<div class="container mt-4">

    <h4 class="text-primary">ğŸ¡ Add Housing WhatsApp Lead</h4>

    <!-- Success -->
    <div *ngIf="successMessage" class="alert alert-success mt-3">
        {{ successMessage }}
    </div>

    <!-- Error -->
    <div *ngIf="errorMessage" class="alert alert-danger mt-3">
        {{ errorMessage }}
    </div>

    <form (ngSubmit)="submitMessage()" class="mt-3">

        <label class="form-label fw-semibold">Paste Lead Message</label>
        <textarea class="form-control" rows="7" [(ngModel)]="rawMessage" name="rawMessage"
            placeholder="Paste complete message here..." required></textarea>

        <button class="btn btn-primary w-100 mt-3" [disabled]="isSubmitting">
            <span *ngIf="!isSubmitting">ğŸ“© Save Lead</span>

            <span *ngIf="isSubmitting">
                <span class="spinner-border spinner-border-sm me-2"></span>
                Processing...
            </span>
        </button>

    </form>

    <!-- Divider -->
    <hr class="my-4" />

    <h4 class="text-primary">ğŸ“‹ Saved WhatsApp Leads</h4>

    <!-- Loader -->
    <div *ngIf="isLoading" class="text-center my-3">
        <div class="spinner-border text-primary"></div>
        <p class="text-muted mt-2">Loading leads...</p>
    </div>

    <!-- Table -->
    <table *ngIf="!isLoading" class="table table-striped table-hover mt-3">
        <thead class="table-primary">
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Phone</th>
                <th>Project</th>
                <th>Locality</th>
                <th>Received</th>
            </tr>
        </thead>

        <tbody>
            <tr *ngFor="let lead of leads; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ lead.name }}</td>
                <td>
                    <a [href]="'tel:' + lead.phone" class="text-primary fw-bold">
                        ğŸ“ {{ lead.phone }}
                    </a>
                </td>
                <td>{{ lead.projectName }}</td>
                <td>{{ lead.locality }}</td>
                <td>{{ lead.createdAt | date:'medium' }}</td>
            </tr>
        </tbody>
    </table>

</div>